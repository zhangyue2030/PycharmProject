import requestsfrom lxml import etreeimport jsonclass minshengExamSystemSpider:    def __init__(self, tryNum):        self.url = "https://nexam.cmbc.com.cn/wis18/customerjsp/msyh/userpaper.viewuserhispaperqueslist.flow"        #self.url = "https://nexam.cmbc.com.cn/wis18/usermain/paper/paperuser.viewpaperuserlistquestiondetail.flow"        self.cookies = "xxxx"        self.user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36"        self.orange = "https://nexam.cmbc.com.cn"        self.contentType= "application/x-www-form-urlencoded"        self.headers = {"User-Agent" :self.user_agent, "Content-Type": self.contentType, "Origin": self.orange, "Cookie": self.cookies}        self.tryNum = tryNum        #构造data_list,其中给观察出代表试题序号的参数留位置 (ques_post参数据我推测是请求时的题目序号)        self.data_dic = {"p_id": "5828032400437732", "trys": tryNum, "ques_pos": "0"}    def get_data_list(self):        data_list =[]        #构造168题的data        for i in range(0,169):            data_dic = self.data_dic.copy()            data_dic["ques_pos"] = i            data_list.append(data_dic)        #print(data_list)        return data_list    # 发送request，接受html_str    def get_html_str(self, data_list):        htmlStr_list = []        for data in data_list:            #print(data_list)            response = requests.post(self.url, headers=self.headers, data= data)            html_str = response.content.decode()            htmlStr_list.append(html_str)        return htmlStr_list    def get_content_list(self, htmlStr):        html = etree.HTML(htmlStr)        div_list = html.xpath("//form[@id='mainfrm']//div//text()")        #print(div_list)        return div_list    def save_content_list(self, num,content_list):        with open("../../ResultFiles/Exam{0}.txt".format(self.tryNum), "a", encoding="utf-8") as f:            f.write(num+".")            for content in content_list:                f.write(content)    '''       实现主要逻辑    '''    def run(self):        # 1.准备工作：构造data        data_list = self.get_data_list()        # 2.循环发送请求，获取相应页面数据列表        htmlStr_list = self.get_html_str(data_list)        #清空文件内容        with open("Exam{0}.txt".format(self.tryNum), "w", encoding="utf-8") as f:            f.truncate()        num =1        for htmlStr in htmlStr_list:            # 3.提取数据            content_list = self.get_content_list(htmlStr)            # 4.保存            self.save_content_list(num= str(num) ,content_list= content_list)            num += 1  # num是要写入文件的题号        print("{0}号试卷保存成功".format(self.tryNum))if __name__ =="__main__":    for i in range(1,11):        collection = minshengExamSystemSpider(i)        collection.run()